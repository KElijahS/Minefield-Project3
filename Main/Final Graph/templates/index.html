<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gender in Popular Music 1941-2020</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background-image: url('https://w7.pngwing.com/pngs/447/505/png-transparent-sound-wave-line-black-and-white-angle-point-pattern-sound-wave-curve-texture-white-flag.png');
            background-repeat: no-repeat;
            background-attachment: fixed; 
            background-size: 100% 100%;
        }
    </style>

    <!--Background not working-->
    <!--Link to CSS file-->
    <!--<link rel="stylesheet" href="styles.css">-->    
</head>
<body>
<!--Title-->
    <div class= "container">
        <div class="mt-4 p-5 bg-black text-white rounded">
            <h1><strong>Gender in Popular Music</strong></h1>
            <p>Data based on Billboard Year End Charts from 1941 to 2020</p>

        </div>

        <br>

        <div class= "container">
            <div class= "row">
<!--ButtonBarplot-->
                <div class= "col-md-8">
                    <h2>Year by Year</h2>

                    <!--buttons for different eras-->
                    <button onclick="update(data1941)">1941</button>
                    <button onclick="update(data1945)">1945</button>
                    <button onclick="update(data1950)">1950</button>
                    <button onclick="update(data1955)">1955</button>
                    <button onclick="update(data1960)">1960</button>
                    <button onclick="update(data1965)">1965</button>
                    <button onclick="update(data1970)">1970</button>
                    <button onclick="update(data1975)">1975</button>
                    <button onclick="update(data1980)">1980</button>
                    <button onclick="update(data1985)">1985</button>
                    <button onclick="update(data1990)">1990</button>
                    <button onclick="update(data1995)">1995</button>
                    <button onclick="update(data2000)">2000</button>
                    <button onclick="update(data2005)">2005</button>
                    <button onclick="update(data2010)">2010</button>
                    <button onclick="update(data2015)">2015</button>
                    <button onclick="update(data2020)">2020</button>

                    <div id="my_dataviz"></div>
                    <script>

                        // create datasets
                        var data1941 = [
                           {group: "Female", value: 3},
                           {group: "FemaleGroup", value: 3},
                           {group: "Male", value: 64},
                           {group: "MaleGroup", value: 10},
                           {group: "MixedGroup", value: 0}
                        ];
                        var data1945 = [
                           {group: "Female", value: 5},
                           {group: "FemaleGroup", value: 1},
                           {group: "Male", value: 64},
                           {group: "MaleGroup", value: 4},
                           {group: "MixedGroup", value: 5}
                        ];
                        var data1950 = [
                           {group: "Female", value: 5},
                           {group: "FemaleGroup", value: 0},
                           {group: "Male", value: 14},
                           {group: "MaleGroup", value: 6},
                           {group: "MixedGroup", value: 5}
                        ];
                        var data1955 = [
                           {group: "Female", value: 5},
                           {group: "FemaleGroup", value: 3},
                           {group: "Male", value: 16},
                           {group: "MaleGroup", value: 5},
                           {group: "MixedGroup", value: 1}
                        ];
                        var data1960 = [
                           {group: "Female", value: 14},
                           {group: "FemaleGroup", value: 2},
                           {group: "Male", value: 63},
                           {group: "MaleGroup", value: 17},
                           {group: "MixedGroup", value: 4}
                        ];
                        var data1965 = [
                           {group: "Female", value: 11},
                           {group: "FemaleGroup", value: 3},
                           {group: "Male", value: 32},
                           {group: "MaleGroup", value: 47},
                           {group: "MixedGroup", value: 7}
                        ];
                        var data1970 = [
                           {group: "Female", value: 6},
                           {group: "FemaleGroup", value: 1},
                           {group: "Male", value: 27},
                           {group: "MaleGroup", value: 52},
                           {group: "MixedGroup", value: 14}
                        ];
                        var data1975 = [
                           {group: "Female", value: 14},
                           {group: "FemaleGroup", value: 2},
                           {group: "Male", value: 37},
                           {group: "MaleGroup", value: 39},
                           {group: "MixedGroup", value: 8}
                        ];
                        var data1980 = [
                           {group: "Female", value: 15},
                           {group: "FemaleGroup", value: 0},
                           {group: "Male", value: 47},
                           {group: "MaleGroup", value: 27},
                           {group: "MixedGroup", value: 11}
                        ];
                        var data1985 = [
                           {group: "Female", value: 20},
                           {group: "FemaleGroup", value: 2},
                           {group: "Male", value: 34},
                           {group: "MaleGroup", value: 32},
                           {group: "MixedGroup", value: 12}
                        ];
                        var data1990 = [
                           {group: "Female", value: 26},
                           {group: "FemaleGroup", value: 6},
                           {group: "Male", value: 35},
                           {group: "MaleGroup", value: 26},
                           {group: "MixedGroup", value: 7}
                        ];
                        var data1995 = [
                           {group: "Female", value: 29},
                           {group: "FemaleGroup", value: 7},
                           {group: "Male", value: 22},
                           {group: "MaleGroup", value: 32},
                           {group: "MixedGroup", value: 10}
                        ];
                        var data2000 = [
                           {group: "Female", value: 26},
                           {group: "FemaleGroup", value: 5},
                           {group: "Male", value: 33},
                           {group: "MaleGroup", value: 22},
                           {group: "MixedGroup", value: 14}
                        ];
                        var data2005 = [
                           {group: "Female", value: 21},
                           {group: "FemaleGroup", value: 1},
                           {group: "Male", value: 39},
                           {group: "MaleGroup", value: 23},
                           {group: "MixedGroup", value: 16}
                        ];
                        var data2010 = [
                           {group: "Female", value: 26},
                           {group: "FemaleGroup", value: 0},
                           {group: "Male", value: 42},
                           {group: "MaleGroup", value: 12},
                           {group: "MixedGroup", value: 20}
                        ];
                        var data2015 = [
                           {group: "Female", value: 25},
                           {group: "FemaleGroup", value: 1},
                           {group: "Male", value: 49},
                           {group: "MaleGroup", value: 9},
                           {group: "MixedGroup", value: 16}
                        ];
                        var data2020 = [
                           {group: "Female", value: 17},
                           {group: "FemaleGroup", value: 1},
                           {group: "Male", value: 67},
                           {group: "MaleGroup", value: 2},
                           {group: "MixedGroup", value: 13}
                        ];
                   
                        // set the dimensions and margins of the graph
                        var margin = {top: 30, right: 30, bottom: 70, left: 60},
                            width = 700 - margin.left - margin.right,
                            height = 450 - margin.top - margin.bottom;
                        
                        // append the svg object to the body of the page
                        var svg = d3.select("#my_dataviz")
                          .append("svg")
                            .attr("width", width + margin.left + margin.right)
                            .attr("height", height + margin.top + margin.bottom)
                          .append("g")
                            .attr("transform",
                                  "translate(" + margin.left + "," + margin.top + ")");
                        
                        // X axis
                        var x = d3.scaleBand()
                          .range([ 0, width ])
                          .domain(data1941.map(function(d) { return d.group; }))
                          .padding(0.2);
                        svg.append("g")
                          .attr("transform", "translate(0," + height + ")")
                          .call(d3.axisBottom(x))
                        
                        // Add Y axis
                        var y = d3.scaleLinear()
                          .domain([0, 70])
                          .range([ height, 0]);
                        svg.append("g")
                          .attr("class", "myYaxis")
                          .call(d3.axisLeft(y));
                        
                        // A function that create / update the plot for a given variable:
                        function update(data) {
                        
                          var u = svg.selectAll("rect")
                            .data(data)
                        
                          u
                            .enter()
                            .append("rect")
                            .merge(u)
                            .transition()
                            .duration(1000)
                              .attr("x", function(d) { return x(d.group); })
                              .attr("y", function(d) { return y(d.value); })
                              .attr("width", x.bandwidth())
                              .attr("height", function(d) { return height - y(d.value); })
                              .attr("fill", "#6610f2")
                        }
                        
                        // Initialize the plot with the first dataset
                        update(data1941)
                        
                    </script>

                    <h5><h5>
                        <p></p>   
                </div>

<!--InfoCard-->
                <div class="card" style="width: 22rem;">
                    <div class="card-body">
                    <h5 class="card-title">Background</h5>
                    <p class="card-text">Billboard Magazine was founded in 1864 by William H. Donaldson and James H. Hennegan. The first
                        issue of billboard magazine was launched in 1894. As time progressed, a chart called “First Hits Chart”
                        was created in July of 1940. The billboard top 100 as we know it today showed up in 1958 and
                        eventually became digital in 1995.</p>
                    <p>As a fan of music, it is interesting to see the years that female artists did well in the charts as opposed to male artists who usually dominate the field. The
                        charts could be used by music labels or independent artists seeing what listeners love the most to create
                        genre of music around that will sell. </p>
                    <a href="http://billboardtop100of.com/" class="card-link">Billboardtop100of.com</a>
                    <a href="https://www.billboard.com/charts/year-end/" class="card-link">Billboard.com</a>
                    </div>
                </div>

            <br>
            <br>
            <br>
            <br>
            <br>

<!--1941 Pie Chart-->
            <div class= "row">
                <div class= "col-md-4">
                    <h2>1941</h2>
                     <!--Doughnut Chart-->
                    <div id="1941PieChart"></div>
                    <canvas id="myChart" width="300" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById("myChart");
                        var myChart = new Chart(ctx, 
                        {
                            type: 'pie',
                            data: 
                            {
                                labels: {{ labels | safe }},
                                datasets: 
                                [
                                    {
                                        label: 'Genders for Top 100 (1941)',
                                        data: {{ values | safe }},
                                        backgroundColor: 
                                        [
                                            'rgba(13, 0, 252, 0.5)',
                                            'rgba(252, 0, 114, 0.25)',
                                            'rgba(0, 221, 255, 0.25)',
                                            'rgba(252, 221, 193, .5)',
                                            'rgba(200, 252, 194, .5)'
                                        ], 
                                        borderColor: 
                                        [
                                            'rgba(13, 0, 252, 0.75)',
                                            'rgba(252, 0, 114, 0.5)',
                                            'rgba(0, 221, 255, 1)',
                                            'rgba(252, 221, 193, 1)',
                                            'rgba(200, 252, 194, 1)'
                                        ],
                                    borderWidth: 1
                                    }
                                ]
                            },
                            options: 
                            {
                                //cutoutPercentage: 40,
                                responsive: false,
                            }
                        });
                    </script>
                </div>

<!--2020 Pie Chart-->
                <div class= "col-md-4">
                    <h2>2020</h2>
                    <div id="2020PieChart"></div>
                    <canvas id="pieChart" width="300" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById("pieChart");
                        var pieChart = new Chart(ctx, 
                        {
                            type: 'pie',
                            data: 
                            {
                                labels: {{ labels | safe }},
                                datasets: 
                                [
                                    {
                                        label: 'Genders for Top 100 (2020)',
                                        data: {{ values2 | safe }},
                                        backgroundColor: 
                                        [
                                            'rgba(13, 0, 252, 0.5)',
                                            'rgba(252, 0, 114, 0.25)',
                                            'rgba(0, 221, 255, 0.25)',
                                            'rgba(252, 221, 193, .5)',
                                            'rgba(200, 252, 194, .5)'
                                        ], 
                                        borderColor: 
                                        [
                                            'rgba(13, 0, 252, 0.75)',
                                            'rgba(252, 0, 114, 0.5)',
                                            'rgba(0, 221, 255, 1)',
                                            'rgba(252, 221, 193, 1)',
                                            'rgba(200, 252, 194, 1)'
                                        ],
                                    borderWidth: 1
                                    }
                                ]
                            },
                            options: 
                            {
                                //cutoutPercentage: 40,
                                responsive: false,
                            }
                        });
                    </script>
                </div>
<!--Top Artist Scrape Button-->
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Current Top Artist</h5>
                      <img src="https://charts-static.billboard.com/img/2021/10/adele-000-easy-on-me-zy9-180x180.jpg" alt="MariahCarey">
                      <!--<img src="{{ topArtist.artist_img }}" alt="MariahCarey">-->
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">Artist Name: Adele</li>  
                        <!--<li class="list-group-item">Artist Name</li>-->
                        <li class="list-group-item"> Song: Easy On Me </li>
                        <!--<li class="list-group-item"> Song: {{ topArtist.song }} </li>-->
                    </ul>
                    <div class="card-body">
                        <!--<a class="btn btn-primary" href="/scrape" role="button">Top Artist</a>-->
                        <button href="/scrape" role="button">Top Artist</button>
                        <a href="https://www.billboard.com/charts/hot-100/" class="card-link">Top 100 Page</a>
                    </div>
                  </div>
            </div>

            <br>
            <br>
            <br>
            <br>

<!--Area Graph-->
            <div class= "row">
                <div class= "col-md-12">
                    <h2>Through the Years</h2>
                    <div id="AreaLineChart"></div>
                    <canvas id="myChart2" width="400" height="200"></canvas>
                    <script>
                        var ctx = document.getElementById("myChart2");
                        var myChart2 = new Chart(ctx,
                        {
                            type: 'line',
                            data:
                            {
                                labels: [1941,1945,1950,1955,1960,1965,1970,1975,1980,1985,1990,1995,2000,2005,2010,2015,2020],
                                //{{ labels2 | safe }},
                                datasets: 
                                [
                                    {
                                        label: 'Male',
                                        data: {{ dataMale | safe }},
                                        borderColor: 'rgba(13, 0, 252, .75)',
                                        backgroundColor: 'rgba(13, 0, 252, 0.5)',
                                        fill: 'origin'
                                    },
                                    {
                                        label: 'Female',
                                        data: {{ dataFemale | safe }},
                                        borderColor: 'rgba(252, 0, 114, 0.5)',
                                        backgroundColor: 'rgba(252, 0, 114, 0.25)',
                                        fill: 'origin'
                                    },
                                    {
                                        label: 'Male Group',
                                        data: {{ dataMaleG | safe }},
                                        borderColor: 'rgba(0, 221, 255, 1)',
                                        backgroundColor: 'rgba(0, 221, 255, 0.25)',
                                        fill: 'origin'
                                    },
                                    {
                                        label: 'Female Group',
                                        data: {{ dataFemaleG | safe }},
                                        borderColor: 'rgba(252, 221, 193, 1)',
                                        backgroundColor: 'rgba(252, 221, 193, .5)',
                                        fill: 'origin'
                                    },
                                    {
                                        label: 'Mixed Group',
                                        data: {{ dataMixed | safe }},
                                        borderColor: 'rgba(200, 252, 194, 1)',
                                        backgroundColor: 'rgba(200, 252, 194, .5)',
                                        fill: 'origin'
                                    }
                                ]
                            },
                            options: 
                            {
                                scales: 
                                {
                                    y: 
                                    {
                                        stacked: true
                                    }
                                },
                                plugins: 
                                {
                                    filler: 
                                    {
                                        propagate: false
                                    },
                                    'samples-filler-analyser': 
                                    {
                                        target: 'chart-analyser'
                                    }
                                },
                                interaction: 
                                {
                                    intersect: false,
                                }
                            }
                        });
                    </script>
                </div>
            </div>

        </div>
        
    </div>   
</body>
</html>